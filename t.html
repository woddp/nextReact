<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>


var  Store={
    list:[],
    editA:[],
    commit:function (option,val) {
        if(!this._isVal(option)){
            this.list.push({value:val,key:option});
        }
        this._change(option,val);
    },
    _isVal:function (key,lists=[]) {
        let is=false;
        for (let item of lists){
             if(item.key===key){
                 is=true;
                 break;
             }
        }
        return is;
    },
    _change:function (key,val) {
            for (let item of this.editA){
                if(item.key===key){
                    item.val(val);
                }
            }
    },
    emit:function (key,callback) {
        if(!this._isVal(key,this.editA)){
            this.editA.push({key:key,val:callback});
        }
    }
}


Store.emit("state",function (val) {
    console.log("监听到变化："+val);
})
Store.emit("woddp",function (val) {
    console.log("监听到变化："+val);
})

Store.commit("state",1);
Store.commit("state",2);
Store.commit("state",4);
Store.commit("state",32);
Store.commit("woddp","你好");







</script>
</body>
</html>